const db = require('./mysqlConfig.js');
const faker = require('faker');

const seed = async (num) => {

  let total = 0;
  let start = new Date().toLocaleTimeString();
  console.log(`Seed start: ${start}`);

  let queryStr = 'INSERT INTO about (aboutHeader, aboutBody, featureTitle, features) VALUES (?, ?, ?, ?), (?, ?, ?, ?), (?, ?, ?, ?), (?, ?, ?, ?), (?, ?, ?, ?), (?, ?, ?, ?), (?, ?, ?, ?), (?, ?, ?, ?), (?, ?, ?, ?), (?, ?, ?, ?), (?, ?, ?, ?), (?, ?, ?, ?), (?, ?, ?, ?), (?, ?, ?, ?), (?, ?, ?, ?), (?, ?, ?, ?), (?, ?, ?, ?), (?, ?, ?, ?), (?, ?, ?, ?), (?, ?, ?, ?), (?, ?, ?, ?), (?, ?, ?, ?), (?, ?, ?, ?), (?, ?, ?, ?), (?, ?, ?, ?), (?, ?, ?, ?), (?, ?, ?, ?), (?, ?, ?, ?), (?, ?, ?, ?), (?, ?, ?, ?), (?, ?, ?, ?), (?, ?, ?, ?), (?, ?, ?, ?), (?, ?, ?, ?), (?, ?, ?, ?), (?, ?, ?, ?), (?, ?, ?, ?), (?, ?, ?, ?), (?, ?, ?, ?), (?, ?, ?, ?), (?, ?, ?, ?), (?, ?, ?, ?), (?, ?, ?, ?), (?, ?, ?, ?), (?, ?, ?, ?), (?, ?, ?, ?), (?, ?, ?, ?), (?, ?, ?, ?), (?, ?, ?, ?), (?, ?, ?, ?)';
  let params = [];

  for (let i = 0; i < num; ++i) {
    for (let h = 0; h < 50; ++h) {
      params.push(faker.lorem.sentence());
      params.push(faker.lorem.paragraph());
      params.push(faker.lorem.sentence());
      params.push(faker.lorem.paragraphs());
    }
  }

  while (total < 10000000) {
    try {
      await db.pool.query(queryStr, params)
        .then(() => {
          total += 50;
        })
        .catch((err) => {
          console.error('Seed 1 error: ', err);
        });
    } catch (err) {
        console.error('Seed 2 error: ', err);
    };
  }

  let end = new Date().toLocaleTimeString();
  console.log(`Seed done: ${end} with ${total} data sets`);
  return process.exit();
};

seed(2000);
